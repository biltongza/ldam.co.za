@page "/image/{imageId}"
@inject IManifestProvider ManifestProvider
@inject IConfiguration Configuration

<img class="image" src="@ImageUrl" style="max-width: @ImageToDisplay.Width;" />

@code {
    [Parameter]
    public string ImageId { get; set; }

    protected contracts.ImageMetadata ImageToDisplay { get; private set; }
    protected string ImageUrl { get; private set; }

    protected override async Task OnInitializedAsync()
    {
        var manifest = await this.ManifestProvider.Manifest;
        var allImages = manifest.Albums.SelectMany(x => x.Value.Images);
        this.ImageToDisplay = allImages.FirstOrDefault(x => x.Key == this.ImageId).Value;
        var href = this.ImageToDisplay.Hrefs["2048"];
        this.ImageUrl = $"{Configuration[Constants.Configuration.StorageRoot]}/portfolio/{href}";
    }
}